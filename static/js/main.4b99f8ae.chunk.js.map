{"version":3,"sources":["redux/components/actions.ts","components/Map/constant.ts","components/Map/index.tsx","redux/threads/actions.ts","redux/voices/thunks.ts","redux/voices/actions.ts","components/HeadNav/index.tsx","components/RecordButton/index.tsx","components/DrawerContainer/index.tsx","utils/time.ts","components/VoicePlayer/index.tsx","components/PlayList/index.tsx","components/ThreadPanel/index.tsx","components/DrawerContainer/constant.ts","components/Main/index.tsx","redux/threads/reducer.ts","redux/voices/reducer.ts","redux/users/reducer.ts","redux/components/reducer.ts","store.ts","App.tsx","redux/threads/thunks.ts","redux/users/thunks.ts","redux/users/actions.ts","serviceWorker.ts","index.tsx","components/ThreadPanel/styles.module.scss","components/HeadNav/styles.module.scss","components/VoicePlayer/styles.module.scss","components/Map/styles.module.scss","components/RecordButton/styles.module.scss","components/PlayList/styles.module.scss","components/DrawerContainer/styles.module.scss","components/Main/styles.module.scss","App.module.scss"],"names":["setDrawerState","side","open","type","urlTemplate","process","options","center","zoom","zoomSnap","zoomDelta","zoomControl","doubleClickZoom","connect","state","threads","drawerState","components","dispatch","setActiveThread","thread","activeThread","loadVoices","threadId","a","fetch","method","res","json","isSuccess","data","voices","msg","stopPlayingThread","mapRef","useRef","layerRef","markerRef","useEffect","container","L","DomUtil","get","_leaflet_id","tileLayer","className","classes","attribution","mapOptions","layers","current","map","layerGroup","addTo","clearLayers","icon","divIcon","forEach","position","latLng","location","_latitude","_longitude","popup","closeButton","pane","marker","bindPopup","on","event","target","id","flyTo","HeadNav","props","AppBar","Toolbar","IconButton","menu","edge","color","aria-label","onClick","toggleDrawer","ButtonGroup","switch","Button","prev","stage","title","next","search","RecordButton","clsx","absolute","isAbsolute","button","DrawerContainer","SwipeableDrawer","anchor","disableSwipeToOpen","disableSwipe","onClose","onOpen","drawer","children","sanitizedDate","timestampObj","_seconds","_nanoseconds","timestamp","firestore","Timestamp","moment","toDate","fromNow","users","profile","badge","find","user","voice","user_id","split","followers","length","info","date","username","like","liked_by_users","idx","key","threadPlaying","toggleThreadPlaying","useState","playListState","setPlayListState","toggleHasPlayed","handle","contents","control","drawerSides","main","reduce","combinedState","drawerSide","left","bottom","undefined","initialState","top","right","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","history","createBrowserHistory","rootReducer","combineReducers","action","router","connectRouter","store","createStore","applyMiddleware","logger","thunk","routerMiddleware","loadThreads","loadUsers","app","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message","module","exports"],"mappings":"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","file":"static/js/main.4b99f8ae.chunk.js","sourcesContent":["import { DrawerSide } from 'redux/components/state';\n\nexport function setDrawerState(side: DrawerSide, open: boolean) {\n  return {\n    type: 'SET_DRAWER_STATE' as 'SET_DRAWER_STATE',\n    side,\n    open\n  };\n}\n\ntype ComponentsActionCreators = typeof setDrawerState;\n\nexport type IComponentsAction = ReturnType<ComponentsActionCreators>;\n","import L from 'leaflet';\n\nconst { REACT_APP_STADIA_MAP_API_KEY } = process.env;\n\nconst tsimShaTsuiLatLng: [number, number] = [22.2988, 114.1722];\n\nexport const urlTemplate: string = `https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png?api_key=${REACT_APP_STADIA_MAP_API_KEY}`;\n\nexport const attribution: string = `\n  &copy; <a href=\"https://stadiamaps.com/\">Stadia Maps</a>,\n  &copy; <a href=\"https://openmaptiles.org/\">OpenMapTiles</a>\n  &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a>\n  contributors\n`;\n\nexport const options: L.MapOptions = {\n  center: tsimShaTsuiLatLng,\n  zoom: 12,\n  zoomSnap: 0.1,\n  zoomDelta: 0.5,\n  zoomControl: false,\n  doubleClickZoom: false\n};\n","import React, { useEffect, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport L from 'leaflet';\nimport { Thread } from 'models';\nimport { IRootState, ThunkResult } from 'store';\nimport { DrawerSide } from 'redux/components/state';\nimport { setActiveThread, stopPlayingThread } from 'redux/threads/actions';\nimport { loadVoices } from 'redux/voices/thunks';\nimport { setDrawerState } from 'redux/components/actions';\nimport { urlTemplate, attribution, options } from './constant';\nimport classes from './styles.module.scss';\n\ninterface IMapProps {\n  threads: Array<Thread>;\n  setActiveThread: (thread?: Thread) => void;\n  loadVoices: (threadId: string) => void;\n  stopPlayingThread: () => void;\n  setDrawerState: (side: DrawerSide, open: boolean) => void;\n}\n\nconst Map: React.FC<IMapProps> = ({\n  threads,\n  setActiveThread, /* tslint:disable-line */\n  loadVoices, /* tslint:disable-line */\n  stopPlayingThread, /* tslint:disable-line */\n  setDrawerState /* tslint:disable-line */\n}: IMapProps) => {\n  const mapRef: React.MutableRefObject<L.Map | null> = useRef(null);\n  const layerRef: React.MutableRefObject<L.LayerGroup | null> = useRef(null);\n  const markerRef: React.MutableRefObject<L.Marker | null> = useRef(null);\n\n  /* initialize map and add tile layer */\n  useEffect(() => {\n    const container = L.DomUtil.get('map');\n    if (container) {\n      (container as any)._leaflet_id = null;\n    }\n\n    const tileLayer: L.TileLayer = L.tileLayer(urlTemplate, {\n      className: classes['tile-layer'],\n      attribution\n    });\n\n    const mapOptions: L.MapOptions = { ...options, layers: [tileLayer] };\n    mapRef.current = L.map('map', mapOptions);\n  }, []);\n\n  /* create layer group */\n  useEffect(() => {\n    layerRef.current = L.layerGroup().addTo(mapRef.current as L.Map);\n  }, []);\n\n  /* create popup and markers */\n  useEffect(() => {\n    (layerRef.current as L.LayerGroup).clearLayers();\n    const icon: L.DivIcon = L.divIcon({ className: classes.icon });\n\n    threads.forEach(thread => {\n      const position = L.latLng([\n        (thread.location as any)._latitude,\n        (thread.location as any)._longitude\n      ]);\n\n      const popup: L.Popup = L.popup({\n        className: classes.popup,\n        closeButton: false,\n        pane: 'shadowPane' /* avoid masking other markers */\n      });\n\n      L.marker(position, { icon })\n        .bindPopup(popup)\n        .on('popupopen', (event: L.LeafletEvent) => {\n          markerRef.current = event.target as L.Marker;\n          stopPlayingThread();\n          setActiveThread(thread);\n          loadVoices(thread.id as string);\n          (mapRef.current as L.Map).flyTo(position);\n          setDrawerState('bottom', true);\n        })\n        .on('popupclose', () => {\n          markerRef.current = null;\n          setActiveThread();\n          setDrawerState('bottom', false);\n        })\n        .addTo(layerRef.current as L.LayerGroup);\n    });\n  }, [threads, stopPlayingThread, setActiveThread, loadVoices, setDrawerState]);\n\n  return <div id=\"map\" className={classes.map} />;\n};\n\nconst mapStateToProps = (state: IRootState) => {\n  return {\n    threads: state.threads.threads,\n    drawerState: state.components.drawerState\n  };\n};\n\nconst mapDispatchToProps = (dispatch: ThunkResult) => {\n  return {\n    setActiveThread: (thread?: Thread) => dispatch(setActiveThread(thread)),\n    loadVoices: (threadId: string) => dispatch(loadVoices(threadId)),\n    stopPlayingThread: () => dispatch(stopPlayingThread()),\n    setDrawerState: (side: DrawerSide, open: boolean) =>\n      dispatch(setDrawerState(side, open))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Map);\n","import { Thread } from 'models';\n\nexport function loadThreadsSuccess(threads: Array<Thread>) {\n  return {\n    type: 'LOAD_THREADS' as 'LOAD_THREADS',\n    threads\n  };\n}\n\nexport function setActiveThread(activeThread?: Thread) {\n  return {\n    type: 'SET_ACTIVE_THREAD' as 'SET_ACTIVE_THREAD',\n    activeThread\n  };\n}\n\nexport function toggleThreadPlaying() {\n  return {\n    type: 'TOGGLE_THREAD_PLAYING' as 'TOGGLE_THREAD_PLAYING'\n  };\n}\n\nexport function stopPlayingThread() {\n  return {\n    type: 'STOP_PLAYING_THREAD' as 'STOP_PLAYING_THREAD'\n  };\n}\n\nexport function failed(type: FAILED, msg: string) {\n  return {\n    type,\n    msg\n  };\n}\n\ntype FAILED = 'LOAD_THREADS_FAILED';\n\ntype ThreadsActionCreators =\n  | typeof loadThreadsSuccess\n  | typeof setActiveThread\n  | typeof toggleThreadPlaying\n  | typeof stopPlayingThread\n  | typeof failed;\n\nexport type IThreadsAction = ReturnType<ThreadsActionCreators>;\n","import { Dispatch } from 'redux';\nimport { IVoicesAction, loadVoicesSuccess, failed } from './actions';\n\nconst { REACT_APP_API_SERVER } = process.env;\n\nexport function loadVoices(threadId: string) {\n  return async (dispatch: Dispatch<IVoicesAction>) => {\n    const res = await fetch(\n      `${REACT_APP_API_SERVER}/voices?thread_id=${threadId}`,\n      { method: 'GET' }\n    );\n    const { isSuccess, data } = await res.json();\n\n    if (isSuccess) {\n      dispatch(loadVoicesSuccess(data));\n    } else {\n      dispatch(failed('LOAD_VOICES_FAILED', data));\n    }\n  };\n}\n","import { Voice } from 'models';\n\nexport function loadVoicesSuccess(voices: Array<Voice>) {\n  return {\n    type: 'LOAD_VOICES' as 'LOAD_VOICES',\n    voices\n  };\n}\n\nexport function failed(type: FAILED, msg: string) {\n  return {\n    type,\n    msg\n  };\n}\n\ntype FAILED = 'LOAD_VOICES_FAILED';\n\ntype VoicesActionCreators = typeof loadVoicesSuccess | typeof failed;\n\nexport type IVoicesAction = ReturnType<VoicesActionCreators>;\n","import React from 'react';\nimport {\n  AppBar,\n  Toolbar,\n  IconButton,\n  ButtonGroup,\n  Button\n} from '@material-ui/core';\nimport { FiSearch } from 'react-icons/fi';\nimport {\n  MdFormatListBulleted,\n  MdChevronLeft,\n  MdChevronRight\n} from 'react-icons/md';\nimport { DrawerSide } from 'redux/components/state';\nimport classes from './styles.module.scss';\n\ninterface IHeadNavProps {\n  title: string;\n  toggleDrawer: (\n    side: DrawerSide,\n    open: boolean\n  ) => (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n}\n\nconst HeadNav: React.FC<IHeadNavProps> = (props: IHeadNavProps) => {\n  return (\n    <AppBar className={classes['head-nav']} position=\"absolute\">\n      <Toolbar>\n        <IconButton\n          className={`${classes.menu} ${classes['nav-menu']}`}\n          edge=\"start\"\n          color=\"inherit\"\n          aria-label=\"menu\"\n          onClick={props.toggleDrawer('left', true)}\n        >\n          <MdFormatListBulleted />\n        </IconButton>\n\n        <ButtonGroup className={classes.switch}>\n          <Button\n            className={`${classes.prev} ${classes['stage-previous']}`}\n            aria-label=\"previous\"\n          >\n            <MdChevronLeft />\n          </Button>\n\n          <Button className={classes.stage} color=\"inherit\">\n            {props.title}\n          </Button>\n\n          <Button\n            className={`${classes.next} ${classes['stage-next']}`}\n            aria-label=\"next\"\n          >\n            <MdChevronRight />\n          </Button>\n        </ButtonGroup>\n\n        <IconButton\n          className={`${classes.search} ${classes['nav-search']}`}\n          edge=\"end\"\n          color=\"inherit\"\n          aria-label=\"search\"\n        >\n          <FiSearch />\n        </IconButton>\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default HeadNav;\n","import React from 'react';\nimport clsx from 'clsx';\nimport { IconButton } from '@material-ui/core';\nimport classes from './styles.module.scss';\n\ninterface IRecordButtonProps {\n  isAbsolute?: boolean;\n}\n\nconst RecordButton: React.FC<IRecordButtonProps> = (\n  props: IRecordButtonProps\n) => {\n  return (\n    <div\n      className={clsx({\n        [classes['record-button']]: true,\n        [classes.absolute]: props.isAbsolute\n      })}\n    >\n      <IconButton className={classes.button} aria-label=\"record\">\n        9up\n      </IconButton>\n    </div>\n  );\n};\n\nexport default RecordButton;\n","import React from 'react';\nimport clsx from 'clsx';\nimport { SwipeableDrawer } from '@material-ui/core';\nimport { DrawerSide } from 'redux/components/state';\nimport classes from './styles.module.scss';\n\ninterface IDrawerContainerProps {\n  side: DrawerSide;\n  open: boolean;\n  disableSwipe?: boolean;\n  children: React.ReactNode;\n  toggleDrawer: (\n    side: DrawerSide,\n    open: boolean\n  ) => (event: React.KeyboardEvent | React.MouseEvent) => void;\n}\n\nconst DrawerContainer: React.FC<IDrawerContainerProps> = (\n  props: IDrawerContainerProps\n) => {\n  return (\n    <SwipeableDrawer\n      anchor={props.side}\n      open={props.open}\n      disableSwipeToOpen={props.disableSwipe}\n      onClose={props.toggleDrawer(props.side, false)}\n      onOpen={props.toggleDrawer(props.side, true)}\n      className={clsx({\n        [classes.drawer]: true,\n        [classes['drawer-horizontal']]:\n          props.side === 'left' || props.side === 'right'\n      })}\n    >\n      {props.children}\n    </SwipeableDrawer>\n  );\n};\n\nexport default DrawerContainer;\n","import { firestore } from 'firebase';\nimport moment from 'moment';\n\nexport function sanitizedDate(timestampObj: {\n  _seconds: number;\n  _nanoseconds: number;\n}) {\n  const { _seconds, _nanoseconds } = timestampObj;\n  const timestamp = new firestore.Timestamp(_seconds, _nanoseconds);\n  return moment(timestamp.toDate()).fromNow();\n}\n","import React from 'react';\nimport { IconButton } from '@material-ui/core';\nimport { FaUserPlus, FaRegHeart } from 'react-icons/fa';\nimport { Voice, User } from 'models';\nimport { IRootState, ThunkResult } from 'store';\nimport { connect } from 'react-redux';\nimport { sanitizedDate } from 'utils/time';\nimport classes from './styles.module.scss';\n\ninterface IVoicePlayerProps {\n  voice: Voice;\n  users: Array<User>;\n}\n\nconst VoicePlayer: React.FC<IVoicePlayerProps> = (props: IVoicePlayerProps) => {\n  return (\n    <div className={classes['voice-player']}>\n      <IconButton className={classes.profile} aria-label=\"profile\">\n        <FaUserPlus />\n\n        <span className={classes.badge}>\n          {\n            props.users.find(\n              user => user.id === props.voice.user_id.split('/')[1]\n            )?.followers?.length\n          }\n          +\n        </span>\n      </IconButton>\n\n      <div className={classes.info}>\n        <p className={classes.date}>\n          {sanitizedDate(props.voice.timestamp as any)}\n        </p>\n\n        <h3 className={classes.user}>\n          {\n            props.users.find(\n              user => user.id === props.voice.user_id.split('/')[1]\n            )?.username\n          }\n        </h3>\n      </div>\n\n      <IconButton className={classes.like} aria-label=\"like\">\n        <FaRegHeart />\n\n        <span className={classes.badge}>\n          {props.voice.liked_by_users.length}+\n        </span>\n      </IconButton>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state: IRootState) => {\n  return {\n    users: state.users.users\n  };\n};\n\nconst mapDispatchToProps = (dispatch: ThunkResult) => {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VoicePlayer);\n","import React from 'react';\nimport clsx from 'clsx';\nimport VoicePlayer from 'components/VoicePlayer';\nimport RecordButton from 'components/RecordButton';\nimport { Voice } from 'models';\nimport { IRootState, ThunkResult } from 'store';\nimport { connect } from 'react-redux';\nimport classes from './styles.module.scss';\n\ninterface IPlayListProps {\n  open: boolean;\n  voices: Array<Voice>;\n}\n\nconst PlayList: React.FC<IPlayListProps> = (props: IPlayListProps) => {\n  return (\n    <div\n      className={clsx({\n        [classes['play-list']]: true,\n        [classes.open]: props.open\n      })}\n    >\n      <ul className={classes.voices}>\n        {props.voices.map((voice, idx) => (\n          <li key={idx}>\n            <VoicePlayer voice={voice} />\n          </li>\n        ))}\n      </ul>\n\n      <RecordButton />\n    </div>\n  );\n};\n\nconst mapStateToProps = (state: IRootState) => {\n  return {\n    voices: state.voices.voices\n  };\n};\n\nconst mapDispatchToProps = (dispatch: ThunkResult) => {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayList);\n","import React, { useState } from 'react';\nimport PlayList from 'components/PlayList';\nimport { IconButton } from '@material-ui/core';\nimport { FaRegStar, FaPlay, FaPause } from 'react-icons/fa';\nimport { MdSkipPrevious, MdSkipNext } from 'react-icons/md';\nimport { FiShare } from 'react-icons/fi';\nimport { Thread, User, Voice } from 'models';\nimport { IRootState, ThunkResult } from 'store';\nimport { toggleThreadPlaying } from 'redux/threads/actions';\nimport { connect } from 'react-redux';\nimport { sanitizedDate } from 'utils/time';\nimport classes from './styles.module.scss';\n\ninterface IThreadPanelProps {\n  activeThread: Thread | undefined;\n  users: Array<User>;\n  voices: Array<Voice>;\n  threadPlaying: boolean;\n  toggleThreadPlaying: () => void;\n}\n\nconst ThreadPanel: React.FC<IThreadPanelProps> = (props: IThreadPanelProps) => {\n  const [playListState, setPlayListState] = useState(props.threadPlaying);\n\n  const toggleHasPlayed = () => {\n    setPlayListState(!playListState);\n  };\n\n  const playOrPauseThread = () => {\n    setPlayListState(true);\n    props.toggleThreadPlaying();\n  };\n\n  return (\n    <div className={classes['thread-panel']}>\n      {props.activeThread && (\n        <div className={classes.container}>\n          <div className={classes.handle} onClick={toggleHasPlayed} />\n\n          <div className={classes.contents}>\n            <h2 className={classes.title} onClick={toggleHasPlayed}>\n              {props.activeThread.title}\n            </h2>\n\n            <p className={classes.info}>\n              {\n                props.users.find(\n                  user => user.id === props.activeThread?.user_id.split('/')[1]\n                )?.username\n              }\n              ・{sanitizedDate(props.activeThread.timestamp as any)}\n            </p>\n\n            <div className={classes.control}>\n              <IconButton\n                className={classes['control-star']}\n                color=\"inherit\"\n                aria-label=\"star\"\n              >\n                <FaRegStar />\n              </IconButton>\n\n              <IconButton\n                className={classes['thread-previous']}\n                color=\"inherit\"\n                aria-label=\"previous\"\n              >\n                <MdSkipPrevious />\n              </IconButton>\n\n              <IconButton\n                className={classes['thread-play']}\n                color=\"inherit\"\n                aria-label=\"play\"\n                onClick={playOrPauseThread}\n              >\n                {props.threadPlaying ? <FaPause /> : <FaPlay />}\n              </IconButton>\n\n              <IconButton\n                className={classes['thread-next']}\n                color=\"inherit\"\n                aria-label=\"next\"\n              >\n                <MdSkipNext />\n              </IconButton>\n\n              <IconButton\n                className={classes['control-share']}\n                color=\"inherit\"\n                aria-label=\"share\"\n              >\n                <FiShare />\n              </IconButton>\n            </div>\n\n            {<PlayList open={playListState} />}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state: IRootState) => {\n  return {\n    activeThread: state.threads.activeThread,\n    users: state.users.users,\n    voices: state.voices.voices,\n    threadPlaying: state.threads.threadPlaying\n  };\n};\n\nconst mapDispatchToProps = (dispatch: ThunkResult) => {\n  return {\n    toggleThreadPlaying: () => dispatch(toggleThreadPlaying())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ThreadPanel);\n","import { DrawerSide } from 'redux/components/state';\n\nexport const drawerSides: Array<DrawerSide> = [\n  'top',\n  'right',\n  'bottom',\n  'left'\n];\n","import React from 'react';\nimport HeadNav from 'components/HeadNav';\nimport RecordButton from 'components/RecordButton';\nimport DrawerContainer from 'components/DrawerContainer';\nimport ThreadPanel from 'components/ThreadPanel';\nimport { drawerSides } from 'components/DrawerContainer/constant';\nimport { Thread } from 'models';\nimport { IRootState, ThunkResult } from 'store';\nimport { DrawerState, DrawerSide } from 'redux/components/state';\nimport { setDrawerState } from 'redux/components/actions';\nimport { connect } from 'react-redux';\nimport classes from './styles.module.scss';\n\ninterface IMainProps {\n  drawerState: DrawerState;\n  activeThread: Thread | undefined;\n  setDrawerState: (side: DrawerSide, open: boolean) => void;\n}\n\nconst Main: React.FC<IMainProps> = (props: IMainProps) => {\n  const toggleDrawer = (side: DrawerSide, open: boolean) => (\n    event: React.KeyboardEvent | React.MouseEvent\n  ) => {\n    if (\n      event &&\n      event.type === 'keydown' &&\n      ((event as React.KeyboardEvent).key === 'Tab' ||\n        (event as React.KeyboardEvent).key === 'Shift')\n    ) {\n      return;\n    }\n    props.setDrawerState(side, open);\n  };\n\n  return (\n    <div className={classes.main}>\n      <HeadNav title=\"吹水台\" toggleDrawer={toggleDrawer} />\n\n      {drawerSides.reduce((combinedState: boolean, drawerSide: DrawerSide) => {\n        return combinedState || props.drawerState[drawerSide];\n      }, false) ? null : (\n        <RecordButton isAbsolute={true} />\n      )}\n\n      <DrawerContainer\n        side=\"left\"\n        open={props.drawerState.left}\n        toggleDrawer={toggleDrawer}\n      >\n        <p>drawer contents</p>\n      </DrawerContainer>\n\n      <DrawerContainer\n        side=\"bottom\"\n        open={props.drawerState.bottom}\n        toggleDrawer={toggleDrawer}\n        disableSwipe={props.activeThread === undefined}\n      >\n        <ThreadPanel />\n      </DrawerContainer>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state: IRootState) => {\n  return {\n    drawerState: state.components.drawerState,\n    activeThread: state.threads.activeThread\n  };\n};\n\nconst mapDispatchToProps = (dispatch: ThunkResult) => {\n  return {\n    setDrawerState: (side: DrawerSide, open: boolean) =>\n      dispatch(setDrawerState(side, open))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Main);\n","import { IThreadsState } from './state';\nimport { IThreadsAction } from './actions';\n\nconst initialState: IThreadsState = {\n  threads: [],\n  activeThread: undefined,\n  threadPlaying: false\n};\n\nexport const threadsReducer = (\n  state: IThreadsState = initialState,\n  action: IThreadsAction\n): IThreadsState => {\n  switch (action.type) {\n    case 'LOAD_THREADS':\n      const { threads } = action;\n      return {\n        ...state,\n        threads\n      };\n    case 'SET_ACTIVE_THREAD':\n      const { activeThread } = action;\n      return {\n        ...state,\n        activeThread\n      };\n    case 'TOGGLE_THREAD_PLAYING':\n      const threadPlaying = !state.threadPlaying;\n      return {\n        ...state,\n        threadPlaying\n      };\n    case 'STOP_PLAYING_THREAD':\n      return {\n        ...state,\n        threadPlaying: false\n      };\n    default:\n      return state;\n  }\n};\n","import { IVoicesState } from './state';\nimport { IVoicesAction } from './actions';\n\nconst initialState: IVoicesState = {\n  voices: []\n};\n\nexport const voicesReducer = (\n  state: IVoicesState = initialState,\n  action: IVoicesAction\n): IVoicesState => {\n  switch (action.type) {\n    case 'LOAD_VOICES':\n      const { voices } = action;\n      return {\n        ...state,\n        voices\n      };\n    default:\n      return state;\n  }\n};\n","import { IUsersState } from './state';\nimport { IUsersAction } from './actions';\n\nconst initialState: IUsersState = {\n  users: []\n};\n\nexport const usersReducer = (\n  state: IUsersState = initialState,\n  action: IUsersAction\n): IUsersState => {\n  switch (action.type) {\n    case 'LOAD_USERS':\n      const { users } = action;\n      return {\n        ...state,\n        users\n      };\n    default:\n      return state;\n  }\n};\n","import { IComponentsState } from 'redux/components/state';\nimport { IComponentsAction } from 'redux/components/actions';\n\nconst initialState: IComponentsState = {\n  drawerState: {\n    top: false,\n    right: false,\n    bottom: false,\n    left: false\n  }\n};\n\nexport function componentsReducer(\n  state: IComponentsState = initialState,\n  action: IComponentsAction\n) {\n  switch (action.type) {\n    case 'SET_DRAWER_STATE':\n      const { side, open } = action;\n      const { drawerState } = state;\n      return {\n        ...state,\n        drawerState: {\n          ...drawerState,\n          [side]: open\n        }\n      };\n    default:\n      return state;\n  }\n}\n","import {\n  compose,\n  createStore,\n  combineReducers,\n  applyMiddleware,\n  Store\n} from 'redux';\nimport { createBrowserHistory } from 'history';\nimport {\n  RouterState,\n  connectRouter,\n  routerMiddleware\n} from 'connected-react-router';\nimport thunk, { ThunkDispatch } from 'redux-thunk';\nimport logger from 'redux-logger';\nimport { IThreadsState } from 'redux/threads/state';\nimport { IVoicesState } from 'redux/voices/state';\nimport { IUsersState } from 'redux/users/state';\nimport { IComponentsState } from 'redux/components/state';\nimport { IThreadsAction } from 'redux/threads/actions';\nimport { IVoicesAction } from 'redux/voices/actions';\nimport { IUsersAction } from 'redux/users/actions';\nimport { IComponentsAction } from 'redux/components/actions';\nimport { threadsReducer } from 'redux/threads/reducer';\nimport { voicesReducer } from 'redux/voices/reducer';\nimport { usersReducer } from 'redux/users/reducer';\nimport { componentsReducer } from 'redux/components/reducer';\n\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__: any;\n    getEventListeners: (element: any) => Array<any>;\n  }\n}\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport const history = createBrowserHistory();\n\nexport interface IRootState {\n  threads: IThreadsState;\n  voices: IVoicesState;\n  users: IUsersState;\n  components: IComponentsState;\n  router: RouterState;\n}\n\ntype IRootAction =\n  | IThreadsAction\n  | IVoicesAction\n  | IUsersAction\n  | IComponentsAction;\n\nconst rootReducer = combineReducers<IRootState>({\n  threads: threadsReducer,\n  voices: voicesReducer,\n  users: usersReducer,\n  components: componentsReducer,\n  router: connectRouter(history)\n});\n\nexport type ThunkResult = ThunkDispatch<IRootState, null, IRootAction>;\n\nconst store: Store<IRootState, IRootAction> = createStore(\n  rootReducer,\n  composeEnhancers(\n    applyMiddleware(logger),\n    applyMiddleware(thunk),\n    applyMiddleware(routerMiddleware(history))\n  )\n);\n\nexport default store;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { ConnectedRouter } from 'connected-react-router';\nimport Map from 'components/Map';\nimport Main from 'components/Main';\nimport { history, IRootState, ThunkResult } from './store';\nimport { loadThreads } from 'redux/threads/thunks';\nimport { loadUsers } from 'redux/users/thunks';\nimport classes from './App.module.scss';\n\ninterface IAppProps {\n  loadThreads: () => void;\n  loadUsers: () => void;\n}\n\nconst App: React.FC<IAppProps> = (props: IAppProps) => {\n  props.loadThreads();\n  props.loadUsers();\n\n  return (\n    <ConnectedRouter history={history}>\n      <div className={classes.app}>\n        <Map />\n        <Main />\n      </div>\n    </ConnectedRouter>\n  );\n};\n\nconst mapStateToProps = (state: IRootState) => {\n  return {};\n};\n\nconst mapDispatchToProps = (dispatch: ThunkResult) => {\n  return {\n    loadThreads: () => dispatch(loadThreads()),\n    loadUsers: () => dispatch(loadUsers())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import { Dispatch } from 'redux';\nimport { IThreadsAction, loadThreadsSuccess, failed } from './actions';\n\nconst { REACT_APP_API_SERVER } = process.env;\n\nexport function loadThreads() {\n  return async (dispatch: Dispatch<IThreadsAction>) => {\n    const res = await fetch(`${REACT_APP_API_SERVER}/threads`, {\n      method: 'GET'\n    });\n    const { isSuccess, data } = await res.json();\n\n    if (isSuccess) {\n      dispatch(loadThreadsSuccess(data));\n    } else {\n      dispatch(failed('LOAD_THREADS_FAILED', data));\n    }\n  };\n}\n","import { Dispatch } from 'redux';\nimport { IUsersAction, loadUsersSuccess, failed } from './actions';\n\nconst { REACT_APP_API_SERVER } = process.env;\n\nexport function loadUsers() {\n  return async (dispatch: Dispatch<IUsersAction>) => {\n    const res = await fetch(`${REACT_APP_API_SERVER}/users`, {\n      method: 'GET'\n    });\n    const { isSuccess, data } = await res.json();\n\n    if (isSuccess) {\n      dispatch(loadUsersSuccess(data));\n    } else {\n      dispatch(failed('LOAD_USERS_FAILED', data));\n    }\n  };\n}\n","import { User } from 'models';\n\nexport function loadUsersSuccess(users: Array<User>) {\n  return {\n    type: 'LOAD_USERS' as 'LOAD_USERS',\n    users\n  };\n}\n\nexport function failed(type: FAILED, msg: string) {\n  return {\n    type,\n    msg\n  };\n}\n\ntype FAILED = 'LOAD_USERS_FAILED';\n\ntype UsersActionCreators = typeof loadUsersSuccess | typeof failed;\n\nexport type IUsersAction = ReturnType<UsersActionCreators>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport store from 'store';\nimport * as serviceWorker from './serviceWorker';\nimport './index.scss';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text-size-smaller\":\"styles_text-size-smaller__9ID4P\",\"text-size-small\":\"styles_text-size-small__EuMrL\",\"text-size-normal\":\"styles_text-size-normal__1OTia\",\"text-size-large\":\"styles_text-size-large__3vK1o\",\"text-size-larger\":\"styles_text-size-larger__28WhF\",\"text-bold\":\"styles_text-bold__lZla8\",\"text-uppercase\":\"styles_text-uppercase__bPdLp\",\"thread-panel\":\"styles_thread-panel__1kB56\",\"container\":\"styles_container__1lcW7\",\"handle\":\"styles_handle__226hH\",\"contents\":\"styles_contents__33G3C\",\"title\":\"styles_title__24vsv\",\"info\":\"styles_info__3NRDf\",\"control\":\"styles_control__252yp\",\"control-star\":\"styles_control-star__1c7pK\",\"control-share\":\"styles_control-share__Pds8-\",\"thread-previous\":\"styles_thread-previous__3lb-e\",\"thread-next\":\"styles_thread-next__1cawo\",\"thread-play\":\"styles_thread-play__2CtbI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text-size-smaller\":\"styles_text-size-smaller__2Z2H_\",\"text-size-small\":\"styles_text-size-small__IjZsk\",\"text-size-normal\":\"styles_text-size-normal__18x1M\",\"text-size-large\":\"styles_text-size-large__2qn5H\",\"text-size-larger\":\"styles_text-size-larger__1JRyu\",\"text-bold\":\"styles_text-bold__tZ_OT\",\"text-uppercase\":\"styles_text-uppercase___vsP3\",\"head-nav\":\"styles_head-nav__2AjrA\",\"nav-menu\":\"styles_nav-menu__2jGZn\",\"nav-search\":\"styles_nav-search__1ar0n\",\"switch\":\"styles_switch__E7v1U\",\"stage\":\"styles_stage__22-Cl\",\"stage-previous\":\"styles_stage-previous__2AVMx\",\"stage-next\":\"styles_stage-next__3YrgJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text-size-smaller\":\"styles_text-size-smaller__2Z7O6\",\"text-size-small\":\"styles_text-size-small__3P5Jc\",\"text-size-normal\":\"styles_text-size-normal__3R_OV\",\"text-size-large\":\"styles_text-size-large__2018t\",\"text-size-larger\":\"styles_text-size-larger__3InOi\",\"text-bold\":\"styles_text-bold__25oU6\",\"text-uppercase\":\"styles_text-uppercase__15c1p\",\"voice-player\":\"styles_voice-player__3XIIQ\",\"profile\":\"styles_profile__3z1BJ\",\"like\":\"styles_like__2opos\",\"badge\":\"styles_badge__ruei-\",\"info\":\"styles_info__1-Rag\",\"date\":\"styles_date__3ur-G\",\"user\":\"styles_user__yQ1n4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text-size-smaller\":\"styles_text-size-smaller__19mQ2\",\"text-size-small\":\"styles_text-size-small__3PFkO\",\"text-size-normal\":\"styles_text-size-normal__30l_J\",\"text-size-large\":\"styles_text-size-large__2YLkK\",\"text-size-larger\":\"styles_text-size-larger__1CCYy\",\"text-bold\":\"styles_text-bold__1ke-k\",\"text-uppercase\":\"styles_text-uppercase__1FLP5\",\"map\":\"styles_map__3B7Q2\",\"tile-layer\":\"styles_tile-layer__1vgma\",\"icon\":\"styles_icon__3SXHt\",\"popup\":\"styles_popup__3EyS_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text-size-smaller\":\"styles_text-size-smaller__289PS\",\"text-size-small\":\"styles_text-size-small__3A4cv\",\"text-size-normal\":\"styles_text-size-normal__3kkF7\",\"text-size-large\":\"styles_text-size-large__3twJV\",\"text-size-larger\":\"styles_text-size-larger__3S1MH\",\"text-bold\":\"styles_text-bold__3S_vo\",\"text-uppercase\":\"styles_text-uppercase__38Dsw\",\"record-button\":\"styles_record-button__2zE4x\",\"button\":\"styles_button__2Lhpx\",\"absolute\":\"styles_absolute__1wqAg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text-size-smaller\":\"styles_text-size-smaller__QdQq8\",\"text-size-small\":\"styles_text-size-small__1ntVF\",\"text-size-normal\":\"styles_text-size-normal__1QG0Q\",\"text-size-large\":\"styles_text-size-large__60MzJ\",\"text-size-larger\":\"styles_text-size-larger__1NDP3\",\"text-bold\":\"styles_text-bold__2aWdQ\",\"text-uppercase\":\"styles_text-uppercase__2HQOU\",\"play-list\":\"styles_play-list__xoJ8L\",\"open\":\"styles_open__24lEQ\",\"voices\":\"styles_voices__32pWd\",\"voice\":\"styles_voice__lsVyV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text-size-smaller\":\"styles_text-size-smaller__Bb7dO\",\"text-size-small\":\"styles_text-size-small__29iPd\",\"text-size-normal\":\"styles_text-size-normal__1FFJy\",\"text-size-large\":\"styles_text-size-large__2NFd2\",\"text-size-larger\":\"styles_text-size-larger___t97M\",\"text-bold\":\"styles_text-bold__1Etxo\",\"text-uppercase\":\"styles_text-uppercase__1akFl\",\"drawer\":\"styles_drawer__2KdUm\",\"drawer-horizontal\":\"styles_drawer-horizontal__39eUO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text-size-smaller\":\"styles_text-size-smaller__1fi0Z\",\"text-size-small\":\"styles_text-size-small__PtZps\",\"text-size-normal\":\"styles_text-size-normal__MAOk3\",\"text-size-large\":\"styles_text-size-large__2FZ2E\",\"text-size-larger\":\"styles_text-size-larger__2EDnl\",\"text-bold\":\"styles_text-bold__37IFA\",\"text-uppercase\":\"styles_text-uppercase__36vkr\",\"main\":\"styles_main__3ZYez\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__2ziFi\"};"],"sourceRoot":""}